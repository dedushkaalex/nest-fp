
## 1. Функциональная спецификация

### 1.1 Пользователи и роли

- **Гость**
    - Регистрация (email/Google/Apple)
    - Прохождение демо-урока Unit 1 (ограничено по функционалу)
- **Ученик (Student)**
    - Профиль: уровень (A1/A2), цель (travel/work/study), язык интерфейса
    - Доступ к курсу Natural English Elementary (Units 1–14)
    - Прохождение уроков:
        - Lead-in (лексика + выражения)
        - Listening (диалог + вопросы)
        - Speaking (AI-bot, speech recognition)
        - Grammar tasks
        - Writing (краткие ответы)
        - Unit Quiz / Progress Test
    - Геймификация:
        - XP, уровень, streaks, badges
        - Лидерборд (глобальный, среди друзей)
        - Челленджи/дуэли (quiz против друга/рандомного)
    - Прогресс:
        - Дашборд по units, навыкам (Listening/Speaking/Grammar/Vocab)
        - История уроков и ошибок
    - Сообщество:
        - Участие в групповых челленджах (неделя/месяц)
- **Премиум‑ученик**
    - Всё, как у ученика, плюс:
        - Неограниченный AI Speaking Bot
        - Offline‑доступ к урокам
        - Без рекламы
        - Доступ к Unit Tests и финальному A2‑сертификату
        - Доп. материалы (подкасты, stories)
- **Администратор / Контент‑редактор**
    - Управление контентом units (уроки, задания, аудио, скрипты)
    - Управление промокодами/тарифами
    - Просмотр агрегированных метрик (MAU, retention, конверсия)


### 1.2 Основные функциональные блоки

1. **Онбординг и диагностика**
    - Экран приветствия + объяснение ценности (Oxford + Gamification)
    - Короткий placement‑тест (лексика/грамматика/понимание) → определение стартового unit (1–3)
    - Настройка daily goal (5 / 10 / 15 минут в день)
2. **Курс Natural English Elementary**
    - Структура:
        - 14 Units, каждый с 4–6 уроками (skills mix: L/S/R/W)
    - Для каждого урока:
        - Контент: текст, аудио, задания
        - Оценка: правильность, время выполнения, подсказки
    - Unit completion:
        - Unit Quiz
        - Разблокировка следующего unit
        - Награды (badge, XP)
3. **AI Speaking Bot**
    - Диалоги по сценам (из units: introductions, food, travel, etc.)
    - Flow:
        - Выбор сцены → подсказка фраз → разговор с ботом (STT + TTS)
        - Оценка произношения, темпа, интонации
    - Ограничения:
        - Бесплатно: N сессий/день
        - Премиум: без ограничений
4. **Геймификация**
    - XP система: за каждый урок/задание
    - Streaks: ежедневная активность
    - Badges: за milestones (Unit completion, streak, speaking sessions)
    - Лидерборды:
        - Weekly XP
        - Среди друзей (по инвайт‑коду или соцсетям)
    - Duels:
        - Async: ответил на quiz → отправил другу → сравнение результатов
5. **Сообщество и челленджи**
    - Групповые челленджи (например, пройти Unit N за неделю)
    - Публичные события (global challenges)
    - Мини‑лента: достижение друзей (badge, unit)
6. **Платежи и подписка**
    - Тарифы: Free, Premium (месяц/год), Add-ons (live tutoring / сертификат)
    - Подписка через:
        - App Store / Google Play
        - Web (Stripe / другой провайдер)
    - Управление планом: апгрейд/отмена, пробный период
7. **Сертификация A2**
    - Финальный тест (Reading/Listening/Use of English/Writing/optional Speaking)
    - Генерация сертификата (PDF) + share‑ссылка
    - Интеграция с LinkedIn (либо просто инструкция по добавлению)
8. **Админ‑панель**
    - CRUD по Units / Lessons / Tasks
    - Статистика:
        - DAU/MAU
        - Completion rates по units
        - Конверсия в Premium
        - Нагрузка на AI‑API

***

## 2. Спецификация бизнес‑требований

### 2.1 Цели продукта

- Вывести MVP платформы для A1–A2 за 3–6 месяцев.
- Достичь:
    - 10k MAU через 6 месяцев
    - 3–5% конверсии в Premium
    - Retention D7 ≥ 40%, D30 ≥ 25%
- Позиционироваться как:
    - «Natural English от Oxford + Duolingo‑уровень вовлечения + смелый UI».


### 2.2 Бизнес‑метрики (KPIs)

- MAU, DAU, DAU/MAU
- Conversion Free → Premium
- ARPU, LTV
- Churn rate (Monthly)
- Completion units per user
- Среднее время сессии, частота в неделю
- CAC и payback period


### 2.3 Модели монетизации

- Freemium:
    - Free: доступ ко всем units, но:
        - Ограниченный AI Speaking
        - Реклама / промо‑баннеры
        - Нет offline
    - Premium:
        - Без ограничений AI
        - Offline
        - Без рекламы
        - Доп. материалы + сертификат
- Дополнительные источники:
    - Платный A2‑сертификат
    - Live‑tutoring (1:1 или групповые занятия)
    - B2B (корпоративные лицензии)


### 2.4 Ограничения и допущения

- Начинаем только с английского (A1–A2).
- Методика: строго по Natural English Elementary (структура units/тем).
- Поддержка языков интерфейса: RU, EN (позже другие).
- Запуск: Web + мобильные приложения (минимум PWA, потом натив при необходимости).

***

## 3. Нефункциональные спецификации

### 3.1 Производительность

- Время отклика API: ≤ 300–500 ms для большинства запросов.
- Время загрузки урока: ≤ 2 сек на типичной сети 4G.
- STT/AI‑ответ для speaking: ≤ 2–3 сек.


### 3.2 Масштабируемость

- Архитектура: backend на NestJS, горизонтальное масштабирование (Kubernetes/containers).
- База: PostgreSQL (основные данные), Redis (кэш, сессии, leaderboard).
- Планируемая нагрузка:
    - Y1: до 100k MAU
    - Y2+: масштабируемость до 1M+ MAU.


### 3.3 Надёжность и отказоустойчивость

- Uptime: ≥ 99% на проде.
- Бекапы БД: ежедневные + point‑in‑time recovery.
- Graceful degradation при недоступности AI‑API (fallback‑режим уроков без speaking).


### 3.4 Безопасность

- JWT‑аутентификация, refresh tokens.
- Шифрование паролей (bcrypt/argon2).
- HTTPS везде.
- Роли и права (user/admin).
- Соответствие GDPR: хранение и удаление пользовательских данных по запросу.


### 3.5 UX / UI качества

- Desktop-first дизайн.
- Дизайн в спокойных тонах, используемые в платформах для обучения
- Минимум 2 точки контроля для ARIA и клавиатурной навигации.

***

## 4. Спецификации интеграции

### 4.1 Внешние сервисы

1. **Speech‑to‑Text (ASR)**
    - Google Cloud Speech‑to‑Text / аналог.
    - Использование:
        - Отправка аудио (web/mob) → расшифровка → оценка произношения.
    - Требования:
        - Поддержка английского (en‑US, en‑GB).
        - Латентность ≤ 2–3 сек.
2. **Text‑to‑Speech (TTS)**
    - Для голосового AI‑бота.
    - Желательно разные голоса (м/ж, диалекты).
3. **Платежи**
    - Web: Stripe / аналог.
    - Mobile: App Store / Google Play billing.
    - Синхронизация статуса подписок с backend (webhooks / cron reconciliation).
4. **Аналитика**
    - Amplitude / Mixpanel / аналог:
        - события: start_lesson, finish_lesson, unit_completed, speech_session, purchase, cancel_subscription, etc.
    - Crash/Performance: Sentry / аналог.
5. **Email/Push‑сервисы**
    - Email (SendGrid/Mailgun) — welcome, reminders, billing.
    - Push (Firebase Cloud Messaging) — daily reminders.

### 4.2 Внутренняя архитектура (уровень интеграций)

- **Frontend** (Web/React + Shadcn UI Kit):
    - SPA, общение с backend через REST/GraphQL API.
- **Backend (NestJS)**:
    - Модули:
        - Auth (JWT, OAuth)
        - Users \& Profiles
        - Course (Units, Lessons, Tasks)
        - Progress \& Gamification
        - Speaking (интеграция с ASR/TTS)
        - Payments \& Billing
        - Admin
- **Data Flow пример (Speaking):**

1. Клиент записывает аудио → отправляет на backend.
2. Backend → ASR API → получает текст.
3. Backend оценивает корректность (сравнение с эталоном/моделью).
4. Backend возвращает результат + рекомендации фронтенду.

***

